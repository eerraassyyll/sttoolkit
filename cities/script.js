let field   = document.querySelector('#field');
let message = document.querySelector('#message');

let cities = [];
let allCities = ["Астана","Алматы","Шымкент","Караганда","Павлодар","Костанай","Актобе","Тараз","Усть-Каменогорск","Семей","Кызылорда","Атырау","Актау","Жезказган","Петропавловск","Темиртау","Экибастуз","Рудный","Балхаш","Сатпаев",
  "Москва","Санкт-Петербург","Новосибирск","Екатеринбург","Казань","Нижний Новгород","Самара","Омск","Челябинск","Ростов-на-Дону",
  "Уфа","Красноярск","Воронеж","Пермь","Волгоград","Краснодар","Саратов","Тюмень","Тольятти","Ижевск",
  "Барнаул","Ульяновск","Ярославль","Иркутск","Хабаровск","Махачкала","Оренбург","Новокузнецк","Кемерово","Рязань",
  "Томск","Астрахань","Пенза","Набережные Челны","Липецк","Тула","Киров","Чебоксары","Калининград","Брянск",
  "Курск","Иваново","Магнитогорск","Белгород","Сочи","Ставрополь","Тверь","Владимир","Архангельск","Сургут","Якутск","Грозный","Вологда","Смоленск","Калуга","Чита","Орёл","Череповец","Владикавказ","Мурманск","Минск","Гомель","Могилёв","Витебск","Гродно","Брест","Бобруйск","Барановичи","Пинск","Орша","Киев","Харьков","Одесса","Днепр","Донецк","Запорожье","Львов","Кривой Рог","Николаев","Мариуполь","Винница","Херсон","Полтава","Чернигов","Черкассы","Житомир","Сумы","Ровно","Каменское","Кропивницкий","Ташкент","Самарканд","Наманган","Андижан","Бухара","Фергана","Карши","Коканд","Навои","Ургенч","Баку","Гянджа","Сумгаит","Мингечаур","Шеки","Ширван","Нахичевань","Ленкорань","Хачмаз","Шамкир","Ереван","Гюмри","Ванадзор","Капан","Арташат","Сисиан","Раздан","Иджеван","Гавар","Аштарак","Тбилиси","Кутаиси","Батуми","Рустави","Гори","Зугдиди","Поти","Телави","Ахалцихе","Марнеули","Кишинёв","Тирасполь","Бельцы","Бендеры","Рыбница","Кагул","Комрат","Сороки","Унгены","Оргеев","Бишкек","Ош","Джалал-Абад","Каракол","Токмок","Нарын","Баткен","Талас","Исфана","Кызыл-Кия","Душанбе","Худжанд","Куляб","Бохтар","Истаравшан","Пенджикент","Вахдат","Турсунзаде","Исфара","Гиссар"];

field.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
        let city = field.value.trim();
        field.value = "";

        if (!city) return;

        if (cities.includes(city)) {
            message.textContent = "Этот город уже был!";
            return;
        }

        if (!allCities.includes(city)) {
            message.textContent = "Такого города нет в списке!";
            return;
        }

        if (cities.length > 0) {
            let lastCity = cities[cities.length - 1];
            let lastLetter = lastCity.slice(-1).toLowerCase();
            if (city[0].toLowerCase() !== lastLetter) {
                message.textContent = "Город должен начинаться на '" + lastLetter.toUpperCase() + "'";
                return;
            }
        }

        cities.push(city);
        message.textContent = "Игрок назвал: " + city;

        let lastLetter = city.slice(-1).toLowerCase();
        let robotCity = allCities.find(c => !cities.includes(c) && c[0].toLowerCase() === lastLetter);

        if (robotCity) {
            cities.push(robotCity);
            message.textContent += "\nРобот назвал: " + robotCity;
        } else {
            message.textContent += "\nРобот не смог назвать город. Победа игрока!";
        }
    }
});
